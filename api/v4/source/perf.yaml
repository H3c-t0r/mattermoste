/api/v4/perf:
  post:
    tags:
      - client
    summary: Submit a performance report of a client
    description: >
      Submits a new performance report to be relayed to the metrics bakcend (Prometheus, or performance metrics plugin).

      ##### Permissions

      Must be authenticated.

    operationId: submitPerformanceReport
    requestBody:
      content:
        application/json:
          schema:
            type: object
            required:
              - version
              - client_id
              - labels
              - start
              - end
              - counters
              - histograms
            properties:
              version:
                type: string
                description: Report version.
              client_id:
                type: string
                description: The unique identifier for client.
              labels:
                type: object
                description: The common labels for each sample in the report.
              start:
                type: integer
                description: Time in epoch milliseconds indicates when these samples being started to be collected.
              end:
                type: integer
                description: Time in epoch milliseconds indicates when these samples stopped to be collected.
              counters:
                type: object
                description: The samples for counter type metrics.
              histograms:
                type: object
                description: The sample for histogram type metrics.
                required:
                  - metric
                  - value
                properties:
                  metric:
                    type: string
                    description: The name of the metric.
                  value:
                    tpye: integer
                    description: The value of the sample.
                  timestamp:
                    type: integer
                    description: Time in epoch milliseconds when the sample is recorded.
                  labels:
                    type: object
                    description: The individual labels for the sample.
      description: Performance report is submitted.
      required: true
    responses:
      "200":
        $ref: "#/components/schemas/StatusOK"
      "400":
        $ref: "#/components/responses/BadRequest"
      "401":
        $ref: "#/components/responses/Unauthorized"
      "500":
        $ref: "#/components/responses/InternalServerError"

// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.
// See LICENSE.txt for license information.

// Code generated by "make store-layers"
// DO NOT EDIT

package app

import (
	"archive/zip"
	"bytes"
	"context"
	"crypto/ecdsa"
	"html/template"
	"io"
	"mime/multipart"
	"net/http"
	"net/url"
	"time"

	"github.com/dyatlov/go-opengraph/opengraph"
	"github.com/gorilla/websocket"
	"github.com/mattermost/mattermost-server/v5/mlog"
	"github.com/mattermost/mattermost-server/v5/plugin"
	"github.com/mattermost/mattermost-server/v5/utils"

	goi18n "github.com/mattermost/go-i18n/i18n"
	"github.com/mattermost/mattermost-server/v5/einterfaces"

	"github.com/mattermost/mattermost-server/v5/model"

	"github.com/mattermost/mattermost-server/v5/services/filesstore"
	"github.com/mattermost/mattermost-server/v5/services/httpservice"
	"github.com/mattermost/mattermost-server/v5/services/imageproxy"
	"github.com/mattermost/mattermost-server/v5/services/timezones"
	"github.com/mattermost/mattermost-server/v5/services/tracing"
	"github.com/mattermost/mattermost-server/v5/store"

)

type {{.Name}} struct {
	app AppIface

		srv *Server

	log              *mlog.Logger
	notificationsLog *mlog.Logger

	t              goi18n.TranslateFunc
	session        model.Session
	requestId      string
	ipAddress      string
	path           string
	userAgent      string
	acceptLanguage string

	accountMigration einterfaces.AccountMigrationInterface
	cluster          einterfaces.ClusterInterface
	compliance       einterfaces.ComplianceInterface
	dataRetention    einterfaces.DataRetentionInterface
	elasticsearch    einterfaces.ElasticsearchInterface
	ldap             einterfaces.LdapInterface
	messageExport    einterfaces.MessageExportInterface
	metrics          einterfaces.MetricsInterface
	notification     einterfaces.NotificationInterface
	saml             einterfaces.SamlInterface

	httpService httpservice.HTTPService
	imageProxy  *imageproxy.ImageProxy
	timezones   *timezones.Timezones

	context context.Context
	store   store.Store


	ctx context.Context
}


{{range $index, $element := .Methods}}
func (s *{{$.Name}}) {{$index}}({{$element.Params | joinParamsWithType}}) {{$element.Results | joinResultsForSignature}} {
	span, _ := tracing.StartSpanWithParentByContext(s.ctx, "app.{{$index}}")
	{{range $paramName, $param := $element.Params}}
	span.SetTag("{{$param.Name}}", {{$param.Name}})
	{{end}}
	defer span.Finish()

	{{if $element.Results | len | eq 0}}s.app.{{$index}}({{$element.Params | joinParams}})
	{{ else }}return s.app.{{$index}}({{$element.Params | joinParams}})
	{{ end}}}
{{end}}

func NewOpenTracingAppLayer(childApp AppIface, ctx context.Context) *{{.Name}} {
	newStore := {{.Name}}{
		app: childApp,
		ctx: ctx,
	}
	return &newStore
}


func (s *{{.Name}}) Srv() *Server {
	return s.srv
}
func (s *{{.Name}}) Log() *mlog.Logger {
	return s.log
}
func (s *{{.Name}}) NotificationsLog() *mlog.Logger {
	return s.notificationsLog
}
func (s *{{.Name}}) T(translationID string, args ...interface{}) string {
	return s.t(translationID, args...)
}
func (s *{{.Name}}) Session() *model.Session {
	return &s.session
}
func (s *{{.Name}}) RequestId() string {
	return s.requestId
}
func (s *{{.Name}}) IpAddress() string {
	return s.ipAddress
}
func (s *{{.Name}}) Path() string {
	return s.path
}
func (s *{{.Name}}) UserAgent() string {
	return s.userAgent
}
func (s *{{.Name}}) AcceptLanguage() string {
	return s.acceptLanguage
}
func (s *{{.Name}}) AccountMigration() einterfaces.AccountMigrationInterface {
	return s.accountMigration
}
func (s *{{.Name}}) Cluster() einterfaces.ClusterInterface {
	return s.cluster
}
func (s *{{.Name}}) Compliance() einterfaces.ComplianceInterface {
	return s.compliance
}
func (s *{{.Name}}) DataRetention() einterfaces.DataRetentionInterface {
	return s.dataRetention
}
func (s *{{.Name}}) Elasticsearch() einterfaces.ElasticsearchInterface {
	return s.elasticsearch
}
func (s *{{.Name}}) Ldap() einterfaces.LdapInterface {
	return s.ldap
}
func (s *{{.Name}}) MessageExport() einterfaces.MessageExportInterface {
	return s.messageExport
}
func (s *{{.Name}}) Metrics() einterfaces.MetricsInterface {
	return s.metrics
}
func (s *{{.Name}}) Notification() einterfaces.NotificationInterface {
	return s.notification
}
func (s *{{.Name}}) Saml() einterfaces.SamlInterface {
	return s.saml
}
func (s *{{.Name}}) HTTPService() httpservice.HTTPService {
	return s.httpService
}
func (s *{{.Name}}) ImageProxy() *imageproxy.ImageProxy {
	return s.imageProxy
}
func (s *{{.Name}}) Timezones() *timezones.Timezones {
	return s.timezones
}
func (s *{{.Name}}) Context() context.Context {
	return s.context
}
func (s *{{.Name}}) Store() store.Store {
	return s.store
}

func (s *{{.Name}}) SetSession(sess *model.Session) {
	s.session = *sess
}
func (s *{{.Name}}) SetStore(str store.Store) {
	s.store = str
}

func (s *{{.Name}}) SetT(t goi18n.TranslateFunc){
	s.t = t
}
func (s *{{.Name}}) SetRequestId(str string){
	s.requestId = str
}
func (s *{{.Name}}) SetIpAddress(str string){
	s.ipAddress = str
}
func (s *{{.Name}}) SetUserAgent(str string){
	s.userAgent = str
}
func (s *{{.Name}}) SetAcceptLanguage(str string)	{
	s.acceptLanguage = str
}
func (s *{{.Name}}) SetPath(str string){
	s.path = str
}
func (s *{{.Name}}) SetContext(c context.Context){
	s.context = c
}
